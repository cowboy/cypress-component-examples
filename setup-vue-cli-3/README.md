# Component Testing Example: Vue CLI (Vue 3)

This is an example **Vue CLI (Vue 3)** project with Cypress component testing.

- `yarn` to install the dependencies
- `npx cypress open-ct` to run interactively
- `npx cypress run-ct` to run all tests headlessly

The following was done to create this example:

1. Initialize a baseline project in the [setup-vue-cli-3](.) subdirectory
   1. `vue create --preset ./setup-vue-cli-3.json setup-vue-cli-3`
   2. `cd setup-vue-cli-3`
   3. Commit [`4cf2e78`](https://github.com/cypress-io/cypress-component-testing-examples/commit/4cf2e7822db86221a30a37fe320e16ec8876f514)
2. Update app to move global styles into main.css file
   1. Move global app styles from [src/App.vue](src/App.vue) into [src/main.css](src/main.css)
   2. Update [src/main.js](src/main.js)
   3. Commit [`9e492d1`](https://github.com/cypress-io/cypress-component-testing-examples/commit/9e492d113dc88c909d611762fc83044ce97e5420)
3. Add Cypress component testing support with sample tests
   1. `yarn add -D https://cdn.cypress.io/beta/npm/10.0.0/linux-x64/circle-10.0-release-e7718f7489276cac2e8ad71bc57a627eb0135fbd/cypress.tgz @cypress/vue@3 @cypress/webpack-dev-server webpack-dev-server`
   2. Add [cypress.config.js](cypress.config.js)
   3. Add [cypress/component/index.html](cypress/component/index.html)
   1. Update [src/App.vue](src/App.vue) to reference new [src/components/Counter.vue](src/components/Counter.vue) component
   1. Add [src/App.cy.js](src/App.cy.js), [src/components/HelloWorld.cy.js](src/components/HelloWorld.cy.js), [src/components/Counter.cy.js](src/components/Counter.cy.js) spec files
   5. Add [src/CounterCompositionApi.vue](src/components/CounterCompositionApi.vue), a Composition API component with tests in [src/components/CounterCompositionApi.cy.js](src/components/CounterCompositionApi.cy.js)
   6. `npx cypress open` (Notice that the fonts don't inherit global app styles)
   7. Edit [cypress/support/component.js](cypress/support/component.js) to import global app styles, the Cypress test preview should update automatically
   8. Commit [`41e51e8`](https://github.com/cypress-io/cypress-component-testing-examples/commit/41e51e8b46ac071da59cfb609955bd1635df7640)
4. Add Cypress Code Coverage
   1. `yarn add -D @cypress/code-coverage@3.10.0-dev.1 babel-plugin-istanbul`
   2. Edit [cypress.json](cypress.json) to enable `coverage`
   3. Edit [cypress/plugins/index.js](cypress/plugins/index.js) to configure the Cypress code coverage task with Istanbul
   4. Edit [cypress/support/index.js](cypress/support/index.js) to import Cypress code coverage support
   5. Update [babel.config.js](babel.config.js) to conditionally use `babel-plugin-istanbul` when Cypress Component tests are running
   6. Add [.nycrc](.nycrc)  to configure istanbul
   7. Edit [.gitignore](.gitignore) to ignore coverage and .nyc_output directories
   8. Commit [`7dd07d0`](https://github.com/cypress-io/cypress-component-testing-examples/commit/7dd07d03642ae687c27604084e977f0c5cc18ce6)

Notes:

- The following `setup-vue-cli-3.json` [preset file](https://cli.vuejs.org/guide/plugins-and-presets.html#local-filesystem-preset) was used when initializing this project with `vue create` in step 1:

```json
{
  "useConfigFiles": false,
  "plugins": {
    "@vue/cli-plugin-babel": {},
    "@vue/cli-plugin-eslint": {
      "config": "base",
      "lintOn": []
    }
  },
  "vueVersion": "3"
}
```

_This example was generated by [setup-vue-cli-3.sh](https://github.com/cypress-io/cypress-component-testing-examples/blob/main/scripts/setup-vue-cli-3.sh) on 2022-02-22. The original README follows._

---

# setup-vue-cli-3

## Project setup
```
yarn install
```

### Compiles and hot-reloads for development
```
yarn serve
```

### Compiles and minifies for production
```
yarn build
```

### Lints and fixes files
```
yarn lint
```

### Customize configuration
See [Configuration Reference](https://cli.vuejs.org/config/).
